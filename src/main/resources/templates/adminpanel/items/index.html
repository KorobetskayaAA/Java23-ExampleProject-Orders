<!DOCTYPE html>
<html lang="ru" class="h-100" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:insert="~{../fragments/layout :: headFragment}">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Orders - Админпанель - Каталог</title>
</head>
<body class="d-flex flex-column h-100">
  <header th:replace="~{../fragments/layout :: header('Java23. Orders - Каталог')}"></header>
  <nav th:replace="~{../fragments/navigation :: main_menu('items')}"></nav>

    <main class="flex-shrink-0">
      <div class="container-lg">
        <div class="m-2">
          <a class="btn btn-primary" href="edit.html"
             th:href="@{'items/create'}">
            <i class="bi bi-plus-square-fill"></i> Новый товар
          </a>
        </div>
        <div class="row my-2">
          <div class="col-sm-9">
            <label for="searchItem" class="form-label"
              >Поиск</label
            >
            <input
              type="text"
              class="form-control"
              id="searchItem"
              placeholder="Введите штрих-код или часть названия"
              th:value="${param.search}"
              onchange="setParam('search', this.value)"
            />
          </div>
          <div class="col-sm-3">
            <label for="sortOrderSelect" class="form-label">Сортировка</label>
            <select id="sortOrderSelect" class="form-select"
                    onchange="setParam('sorting', this.value)"
                    th:value="${param.sorting}"
            >
              <option value="title" th:selected="${#strings.equals(param.sorting, 'title')}">По названию</option>
              <option value="priceAsc" th:selected="${#strings.equals(param.sorting, 'priceAsc')}">От дешёвых к
                дорогим
              </option>
              <option value="priceDesc" th:selected="${#strings.equals(param.sorting, 'priceDesc')}">От дорогих к
                дешёвым
              </option>
            </select>
          </div>
        </div>
        <div class="my-3 row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
          <div class="col" th:each="item : ${items}">
            <div class="card product-card">
              <div
                class="card-header align-content-center d-flex justify-content-between"
              >
                <div th:text="${item.barcode}" class="bi-upc">4601234500001</div>
                <div title="Статус: доступен" th:title="${'Статус: ' + (item.isAvailable() ? 'доступен' : 'закрыт')}"
                     th:class="${item.isAvailable() ? 'text-success' : 'text-danger'}">
                  <i class="bi bi-cart-check"
                  ></i>
                </div>
              </div>
              <div class="card-body d-flex gap-2">
                <span th:text="${item.title}" class="flex-grow-1">Чайник электрический</span>
                <span th:text="${#numbers.formatCurrency(item.price)}">2&nbsp;511,64</span>
              </div>
              <div class="card-footer d-flex justify-content-end gap-1">
                <a
                  class="nav-item text-primary"
                  href="edit.html?barcode=4601234500001"
                  th:href="@{'items/edit?barcode=' + ${item.barcode}}"
                  ><i class="bi bi-pencil-square"></i
                ></a>
              </div>
            </div>
          </div>
        </div>
        <nav th:replace="~{../fragments/navigation :: pagination}">
        </nav>
      </div>
    </main>

  <footer th:replace="~{../fragments/layout :: footer}"></footer>
  </body>
</html>
